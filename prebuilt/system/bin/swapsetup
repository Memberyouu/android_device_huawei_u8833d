#!/system/bin/sh
# xjljian
SWAPADD="loop7"
ZRAMSIZE=60

if [ -d /data/property/swapp15-run ]
  then
      busybox umount /cache
      busybox umount /cust
      busybox losetup /dev/block/$SWAPADD /dev/block/mmcblk0p15
      busybox mkswap /dev/block/$SWAPADD 
      busybox swapon /dev/block/$SWAPADD
      busybox mount -t ext4 /dev/block/mmcblk0p16 /cache
      echo 60 >/proc/sys/vm/swappiness          
fi

if [ -d /data/property/swapp16-run ]
  then
      busybox umount /cache
      busybox umount /cust   
      busybox losetup /dev/block/$SWAPADD /dev/block/mmcblk0p16
      busybox mkswap /dev/block/$SWAPADD 
      busybox swapon /dev/block/$SWAPADD
      busybox mount -t ext4 /dev/block/mmcblk0p15 /cache
      echo 60 >/proc/sys/vm/swappiness

fi

if [ -d /data/property/zram-run ]
then
modprobe zram num_devices=1
echo $(($ZRAMSIZE*1024*1024)) > /sys/block/zram0/disksize
busybox mkswap /dev/block/zram0
busybox swapon /dev/block/zram0
fi

exit
